<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="장바구니 기능과 localStorage">
    <!-- Bootstrap CSS -->
    <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
    crossorigin="anonymous">
    <style>
      .container {
        overflow: hidden;
      }
      .card {
        float: left;
        padding-bottom: 24px;
      }
      .btn {
        width: 30%;
        margin-left: auto;
        border: 1px solid #000;
      }
      button:active {
        background: tomato;
      }
      .cart_list {
        height: 500px;
        text-align: center;
        margin-top: 20px;
        border: 1px solid #000;
        padding: 24px;
      }
      .list {
        list-style: none;
      }
    </style>

    <title>level3_13_hw</title>
</head>
<body>
  <div class="container">
    <div class="rows">
  
        <!-- <div class="col-sm-4">
          <img src="https://via.placeholder.com/600" class="w-100">
          <h5>Card title</h5>
          <p>가격 : 70000</p>
        </div>
   -->
    </div>
  </div> 

  <div class="container cart_list">
    <div class="row">
        <h2>CART LIST</h2>
        <ul class="list">
          <li></li>
        </ul>
    </div>
  </div> 


  <script
  src="https://code.jquery.com/jquery-3.6.0.js"
  integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
  crossorigin="anonymous"></script>
  <script>
    var products = [
      { id : 0, price : 70000, title : 'Blossom Dress' },
      { id : 1, price : 50000, title : 'Springfield Shirt' },
      { id : 2, price : 60000, title : 'Black Monastery' }
    ];

    // 선생님은 더 간단하게 하넹^_^!
    products.forEach(function(a,i) {
        var 템플릿 = `<div class="col-sm-4 card">
                          <img src="https://via.placeholder.com/600" class="w-100">
                          <h5>${a.title}</h5>
                          <p>${a.price}</p>
                          <button type="button" class="btn">구매</button>
                      </div>`
        document.querySelector('.rows').insertAdjacentHTML('beforeend', 템플릿);
    })
  </script>
  
  <!-- localStorage 숙제 -->
  <script>
    //// Q. 구매를 누르면 상품명 localStorage에 저장하기
    //// localStorage에 저장된 데이터들을 보여줄 수 있도록하기
    //// key: cart, value는 array 형식으로 추가해보장
    //// tip: 형제요소(sibling)찾는 법?
    //// localStorage에 처음 추가할 때 array를 새로 생성하는 것도 생각해봐야함
    //// 두번 째 누를 때 부턴 수정해주세요~~식으로 짜야함

    var count = 0;
    var btn = document.querySelectorAll('.btn');
    var card = document.querySelectorAll('.card');

    // console.log(card[1].children[1].textContent)
    
    for(let i = 0; i < btn.length; i++) {
        btn[i].addEventListener('click', function(){
          count += 1;

          if(count == 1) {
            var arr = [];
            arr[0] = card[i].children[1].textContent;
            // console.log(arr)
            
            var newArr = JSON.stringify(arr);
            localStorage.setItem('cart', newArr);
            console.log(localStorage.getItem('cart'))
          } else {
            // arr[1] = card[i].children[1].textContent;
            
            // var save = localStorage.getItem('cart');
            // JSON.parse(save);
            // console.log(save);
            console.log(arr[0] = card[i].children[1].textContent)
          }
      }) 
    }
    

  </script>


    <!--
      1. 형제요소 텍스트값 가져오기
      2. 두 번째 클릭했을 때 localStorage array 추가는?

    -->
  </body>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
</html>