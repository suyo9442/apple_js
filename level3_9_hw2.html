<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ajax 2 : 상품 더보기 버튼 만들기">
    <!-- Bootstrap CSS -->
    <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
    crossorigin="anonymous">

    <style>
        .card {
          float: left;
        }
    </style>

    <title>level3_9_hw2</title>
</head>
<body>
  <div class="container">
    <div class="rows">
  
        <!-- <div class="col-sm-4">
          <img src="https://via.placeholder.com/600" class="w-100">
          <h5>Card title</h5>
          <p>가격 : 70000</p>
        </div>
   -->
    </div>
  </div> 

  <div class="container">
    <button class="btn btn-danger" id="more">더보기</button>
  </div>




  <script
  src="https://code.jquery.com/jquery-3.6.0.js"
  integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
  crossorigin="anonymous"></script>
  <script>
    //더보기를 하면 상품 데이터 3개 출력하기
    var btn = document.querySelector('#more');
    var count = 0;

    function 템플릿생성(url) {
      $.get(url)
      .done(function(b){
      b.forEach(function(c){
          var 템플릿 = `<div class="container">
                      <div class="col-sm-4 card">
                        <img src="https://via.placeholder.com/600" class="w-100">
                        <h5>${c.title}</h5>
                        <p>${c.price}</p>
                      </div>
                    </div>`
          document.querySelector('.rows').insertAdjacentHTML('beforeend', 템플릿);              
        })
      })
    }

    // 더보기를 또 누르면 7,8,9 상품도 출력하고 + 버튼 없애기
    // 중복되는 함수 축약하기
    btn.addEventListener('click', function(){
      count += 1;

      if(count == 1) {
        템플릿생성('https://codingapple1.github.io/js/more1.json');
      } else if (count == 2) {
        템플릿생성('https://codingapple1.github.io/js/more2.json');
        btn.style.display = 'none'
      }
    })
  </script>

  <script>
      var products = [
        { id : 0, price : 70000, title : 'Blossom Dress' },
        { id : 1, price : 50000, title : 'Springfield Shirt' },
        { id : 2, price : 60000, title : 'Black Monastery' }
      ];

      // 선생님은 더 간단하게 하넹^_^!
      products.forEach(function(a) {
          var 템플릿 = `<div class="container">
                          <div class="col-sm-4 card">
                            <img src="https://via.placeholder.com/600" class="w-100">
                            <h5>${a.title}</h5>
                            <p>${a.price}</p>
                          </div>
                        </div>`
          document.querySelector('.rows').insertAdjacentHTML('beforeend', 템플릿);
      })
  </script>



    <!--
        1. 중복되는 함수 축약하기
        => get도 축약해서 사용가능, get의 url을 파라미터로 사용!
    -->
  </body>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
</html>